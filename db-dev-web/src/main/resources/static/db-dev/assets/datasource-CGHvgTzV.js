import{aY as n,r as s}from"./vue-vendor-yGlHWbnf.js";import{P as c}from"./vendor-BTz0EEYM.js";import{a}from"./element-plus-Cxi87m0O.js";const i=()=>window.__DB_DEV_CONFIG__?.apiBaseURL?window.__DB_DEV_CONFIG__.apiBaseURL:"/db-dev/api",t=c.create({baseURL:i(),timeout:3e4});t.interceptors.request.use(e=>e,e=>(console.error("Request error:",e),Promise.reject(e)));t.interceptors.response.use(e=>{const r=e.data;return r.code!==200?(a.error(r.message||"Error"),Promise.reject(new Error(r.message||"Error"))):r},e=>(console.error("Response error:",e),a.error(e.message||"请求失败"),Promise.reject(e)));const d=()=>t({url:"/datasource/list",method:"get"}),f=e=>t({url:"/datasource/test",method:"post",data:{name:e}}),D=e=>t({url:`/datasource/${e}`,method:"delete"}),g=n("datasource",()=>{const e=s([]),r=s(!1);return{dataSources:e,loading:r,loadDataSources:async()=>{r.value=!0;try{const o=await d();return e.value=o.data.map(u=>({...u,status:"success"})),e.value}finally{r.value=!1}}}});export{D as d,t as r,f as t,g as u};
