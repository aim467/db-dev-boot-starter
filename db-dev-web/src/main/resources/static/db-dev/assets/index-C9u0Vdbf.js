const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./Login-t0wfO9Vs.js","./vue-vendor-BB5k324P.js","./element-plus-DuTa5cwT.js","./vendor-BTz0EEYM.js","./element-plus-DbC0dCYL.css","./request-CcLfhpZL.js","./Login-D4PDg2dX.css","./Layout-DWDh0DQO.js","./Layout-Df7ec5Q2.css","./Dashboard-DSOg7UDX.js","./datasource-BB4_IJ-g.js","./datasource-CNDQnR3F.js","./metadata-BvLBKV1p.js","./Dashboard-DOBrmBdp.css","./DataSources-D81DOMeA.js","./DataSources-08JpOD3y.css","./Tables-CpYljXEU.js","./Tables-shxMBGMA.css","./SqlExecutor-DexIqHrT.js","./SqlExecutor-B2wt-J-b.css","./CodeGen-CKTgLA5a.js","./CodeGen-D7Z9V2R6.css","./404-B4B6vpfm.js","./404-Bbrkmpui.css"])))=>i.map(i=>d[i]);
import{m as P,ay as L,o as O,aT as w,aU as A,aQ as I,aV as S}from"./vue-vendor-BB5k324P.js";import{E as R,i as D}from"./element-plus-DuTa5cwT.js";import{P as q}from"./vendor-BTz0EEYM.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))s(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function r(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerPolicy&&(o.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?o.credentials="include":t.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(t){if(t.ep)return;t.ep=!0;const o=r(t);fetch(t.href,o)}})();const V=(e,n)=>{const r=e.__vccOpts||e;for(const[s,t]of n)r[s]=t;return r},k={};function B(e,n){const r=L("router-view");return O(),P(r)}const T=V(k,[["render",B]]),C="modulepreload",N=function(e,n){return new URL(e,n).href},y={},l=function(n,r,s){let t=Promise.resolve();if(r&&r.length>0){let b=function(i){return Promise.all(i.map(m=>Promise.resolve(m).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};const a=document.getElementsByTagName("link"),c=document.querySelector("meta[property=csp-nonce]"),E=c?.nonce||c?.getAttribute("nonce");t=b(r.map(i=>{if(i=N(i,s),i in y)return;y[i]=!0;const m=i.endsWith(".css"),p=m?'[rel="stylesheet"]':"";if(s)for(let f=a.length-1;f>=0;f--){const _=a[f];if(_.href===i&&(!m||_.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${p}`))return;const u=document.createElement("link");if(u.rel=m?"stylesheet":C,m||(u.as="script"),u.crossOrigin="",u.href=i,E&&u.setAttribute("nonce",E),document.head.appendChild(u),m)return new Promise((f,_)=>{u.addEventListener("load",f),u.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${i}`)))})}))}function o(a){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=a,window.dispatchEvent(c),!c.defaultPrevented)throw a}return t.then(a=>{for(const c of a||[])c.status==="rejected"&&o(c.reason);return n().catch(o)})},U=()=>{const e=document.querySelector('script[src*="assets/"]');if(e?.src){const s=new URL(e.src),t=s.pathname.indexOf("/assets/");if(t>0)return s.pathname.substring(0,t)+"/"}const n=window.location.pathname;if(n.endsWith(".html"))return n.substring(0,n.lastIndexOf("/")+1);const r=n.split("/").filter(Boolean);return r.length>0?"/"+r[0]+"/":"/db-dev/"},x=()=>{if(window.__DB_DEV_CONFIG__?.apiBaseURL)return window.__DB_DEV_CONFIG__.apiBaseURL;let e=window.location.pathname;e.endsWith(".html")&&(e=e.substring(0,e.lastIndexOf("/")));const n=document.querySelector('script[src*="assets/"]')?.src;if(n){const s=new URL(n),t=s.pathname.indexOf("/assets/");if(t>0)return s.pathname.substring(0,t)+"/api"}const r=e.split("/").filter(Boolean);return r.length>=2?"/"+r.slice(0,-1).join("/")+"/api":r.length===1?"/"+r[0]+"/api":"/db-dev/api"};let d=null,h=null;const $=async()=>d!==null?d:h||(h=q.get(`${x()}/auth/security-status`).then(e=>(d=e.data?.data?.enabled??!0,d)).catch(()=>(d=!0,d)).finally(()=>{h=null}),h),v=w({history:A(U()),routes:[{path:"/login",name:"Login",component:()=>l(()=>import("./Login-t0wfO9Vs.js"),__vite__mapDeps([0,1,2,3,4,5,6]),import.meta.url),meta:{requiresAuth:!1}},{path:"/",name:"Layout",component:()=>l(()=>import("./Layout-DWDh0DQO.js"),__vite__mapDeps([7,1,5,3,2,4,8]),import.meta.url),redirect:"/dashboard",meta:{requiresAuth:!0},children:[{path:"/dashboard",name:"Dashboard",component:()=>l(()=>import("./Dashboard-DSOg7UDX.js"),__vite__mapDeps([9,10,1,11,5,3,2,4,12,13]),import.meta.url)},{path:"/datasources",name:"DataSources",component:()=>l(()=>import("./DataSources-D81DOMeA.js"),__vite__mapDeps([14,10,1,11,5,3,2,4,15]),import.meta.url)},{path:"/tables",name:"Tables",component:()=>l(()=>import("./Tables-CpYljXEU.js"),__vite__mapDeps([16,10,1,11,5,3,2,4,12,17]),import.meta.url)},{path:"/sql",name:"SqlExecutor",component:()=>l(()=>import("./SqlExecutor-DexIqHrT.js"),__vite__mapDeps([18,1,10,11,5,3,2,4,19]),import.meta.url)},{path:"/codegen",name:"CodeGen",component:()=>l(()=>import("./CodeGen-CKTgLA5a.js"),__vite__mapDeps([20,11,5,3,2,1,4,12,21]),import.meta.url)}]},{path:"/:pathMatch(.*)*",name:"NotFound",component:()=>l(()=>import("./404-B4B6vpfm.js"),__vite__mapDeps([22,1,2,3,4,23]),import.meta.url)}]});v.beforeEach(async(e,n,r)=>{if(!e.matched.some(a=>a.meta.requiresAuth)){r();return}if(!await $()){r();return}if(!(localStorage.getItem("db-dev-token")||sessionStorage.getItem("db-dev-token"))){r("/login");return}if(e.path==="/login"){r("/dashboard");return}r()});const g=()=>{const e=I(T);for(const[n,r]of Object.entries(R))e.component(n,r);e.use(S()),e.use(v),e.use(D),e.mount("#app")};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",g):g();export{V as _,v as r};
